## Chapters
* 00:00 - Engineering Questions
* 00:53 - Monolith or Microservices?
* 01:27 - Choice of Language?
* 02:35 - Cost Estimation
* 05:23 - Capacity Estimation!
* 05:57 - APIs and SLAs

## Transcript
00:00:00.035 --> 00:00:02.525 Your founder is reasonably happy, at least the costs
00:00:02.585 --> 00:00:04.285 of managing support tickets has gone down.
00:00:04.345 --> 00:00:06.405 But in a few weeks time, again, they come back to you
00:00:06.625 --> 00:00:08.405 and they're ready to ask you
00:00:08.425 --> 00:00:11.045 for some very subjective technical advice,
00:00:11.265 --> 00:00:13.725 and one of the questions they ask you is, Hey, should I go
00:00:13.725 --> 00:00:15.325 with a microservice architecture?
00:00:15.395 --> 00:00:17.005 I've heard that M are fast.
00:00:17.005 --> 00:00:18.405 I've heard that they're easily scalable.
00:00:18.425 --> 00:00:20.165 Should I go for this? Currently?
00:00:20.525 --> 00:00:21.565 I asked my developer
00:00:21.565 --> 00:00:23.245 and they said that this is a monolith architecture.
00:00:23.245 --> 00:00:25.605 Another thing that they may ask is, is no JS
00:00:25.865 --> 00:00:28.925 or is Python a fast enough technology?
00:00:28.925 --> 00:00:31.925 Currently we are using Java or we are using Golang.
00:00:31.925 --> 00:00:33.245 Should we move to that technology
00:00:33.245 --> 00:00:35.125 because my developers are more accustomed to it?
00:00:35.185 --> 00:00:38.845 I'm also having hiring made easy if I start using popular
00:00:38.845 --> 00:00:40.805 technologies so I can find talent faster
00:00:40.905 --> 00:00:42.605 and maybe even cheaper, lesser training time.
00:00:42.605 --> 00:00:44.325 So these are completely subjective questions,
00:00:44.345 --> 00:00:46.445 and what we try to do is understand them from the
00:00:46.445 --> 00:00:48.885 perspective of a technical lead or engineering manager.
00:00:49.025 --> 00:00:50.845 So someone who has technical knowledge
00:00:50.865 --> 00:00:53.205 but also has some understanding of the business,
00:00:53.305 --> 00:00:55.045 and for the first question, whether we should go
00:00:55.045 --> 00:00:56.165 with microservices or not.
00:00:56.265 --> 00:00:57.605 You can't tell them the pros
00:00:57.625 --> 00:00:59.645 and cons of going with microservices.
00:00:59.755 --> 00:01:01.605 It's better to tell them what are the benefits
00:01:01.785 --> 00:01:04.205 and potential drawbacks of moving to microservices.
00:01:04.485 --> 00:01:07.525 I have two detailed videos on monoliths versus microservices
00:01:07.625 --> 00:01:09.245 and how to migrate from monoliths
00:01:09.245 --> 00:01:10.525 to microservices if you need to.
00:01:10.625 --> 00:01:13.005 In my opinion at this point, for such a small company,
00:01:13.005 --> 00:01:14.845 there is no need to have microservices.
00:01:15.025 --> 00:01:17.685 You don't have a team of greater than 10 or 15 people.
00:01:17.785 --> 00:01:20.045 You don't have them distributed across different offices.
00:01:20.225 --> 00:01:21.965 You don't need to go for microservices just now.
00:01:22.105 --> 00:01:24.205 But like I said, as a tech lead, you want
00:01:24.205 --> 00:01:26.165 to bring the reasoning with your decision,
00:01:26.195 --> 00:01:27.205 also with your suggestion.
00:01:27.205 --> 00:01:30.125 Also, the second question is, Hey, is no JS really slow
00:01:30.125 --> 00:01:31.165 or is Python really slow?
00:01:31.165 --> 00:01:32.845 If you have these kind of subjective questions,
00:01:32.845 --> 00:01:34.365 it's very hard to answer that.
00:01:34.455 --> 00:01:37.125 Again, it's better to bring in some objectivity if you can.
00:01:37.145 --> 00:01:39.245 You can say that. Look, in general, when it comes
00:01:39.265 --> 00:01:41.365 to general operations, I'm not talking about ame.
00:01:41.505 --> 00:01:42.565 I'm not talking about io.
00:01:42.625 --> 00:01:45.085 I'm talking about generally maybe no JS is two
00:01:45.145 --> 00:01:48.045 or four times slower than many of the optimized languages.
00:01:48.065 --> 00:01:49.405 So yes, it will be slower,
00:01:49.465 --> 00:01:50.885 but that means that you are going
00:01:50.885 --> 00:01:52.965 to pay the cloud solution provider money
00:01:53.065 --> 00:01:54.365 for hosting your services.
00:01:54.505 --> 00:01:56.725 You are going to need more servers to do the same amount
00:01:56.725 --> 00:01:58.485 of work as those requests are distributed.
00:01:58.505 --> 00:02:00.925 In parallel, your serverless compute is going
00:02:00.925 --> 00:02:03.765 to cost you more, but if you see that it's cheaper to hire,
00:02:03.765 --> 00:02:06.005 cheaper to train, then you have to offset those costs.
00:02:06.185 --> 00:02:08.485 So there's a cost benefit analysis that you want to do,
00:02:08.585 --> 00:02:10.565 and by putting this point forward,
00:02:10.985 --> 00:02:13.605 you are not just bringing in tech into the discussion,
00:02:13.605 --> 00:02:15.325 but you're also bringing the business into the discussion.
00:02:15.325 --> 00:02:17.485 When it comes to subjective questions, as much
00:02:17.485 --> 00:02:20.085 as you can try to talk with numbers, ask them
00:02:20.115 --> 00:02:22.125 what is the cost of hiring a person on average?
00:02:22.225 --> 00:02:23.645 How much time do they take and ask them
00:02:23.645 --> 00:02:24.805 the time to train a person.
00:02:24.905 --> 00:02:27.165 And then you can, you know, put a cost over there
00:02:27.165 --> 00:02:29.085 and then say, if you move to this other technology,
00:02:29.335 --> 00:02:30.805 it'll take this much migration time.
00:02:30.805 --> 00:02:32.605 That's a cost. Again, does it really make
00:02:32.605 --> 00:02:33.685 sense for a small company?
00:02:33.695 --> 00:02:35.525 Again, I would say it probably doesn't.
00:02:35.685 --> 00:02:38.485 A very different kind of question is what is the cost
00:02:38.545 --> 00:02:39.885 of implementing this feature?
00:02:40.095 --> 00:02:43.085 Let's say you want users to be able to see themselves
00:02:43.255 --> 00:02:44.725 where the T-shirts that they're buying,
00:02:44.745 --> 00:02:47.325 so they turn on the camera and now you find out
00:02:47.325 --> 00:02:48.965 where their head is, where their hands are,
00:02:49.025 --> 00:02:51.205 and then you have to place the T-shirt in real time.
00:02:51.205 --> 00:02:53.125 Maybe you want to make it even more realistic,
00:02:53.125 --> 00:02:55.045 so if they turn round, they turn their torso.
00:02:55.105 --> 00:02:56.405 You can see the T-shirt
00:02:56.515 --> 00:02:58.325 with its shadows changing would be
00:02:58.325 --> 00:02:59.645 pretty advanced, but it can happen.
00:02:59.675 --> 00:03:00.885 This is something you want to give
00:03:00.895 --> 00:03:02.365 users before they purchase.
00:03:02.365 --> 00:03:05.245 So what's the cost of that? Another very technical question
00:03:05.265 --> 00:03:07.365 is, if we are going to store these videos
00:03:07.745 --> 00:03:09.445 as files, what's the cost of that?
00:03:09.585 --> 00:03:11.765 And maybe you want users to be able
00:03:11.765 --> 00:03:14.285 to see themselves wearing different t-shirts, store that
00:03:14.345 --> 00:03:15.525 and share it with their friends.
00:03:15.655 --> 00:03:16.685 Let's go for the first question.
00:03:16.685 --> 00:03:18.365 There's a lot of variables here. Yes.
00:03:18.475 --> 00:03:20.165 What is the cost of implementing this feature?
00:03:20.195 --> 00:03:21.245 Well, there's a tech cost
00:03:21.305 --> 00:03:23.365 and then there's the frequency of use of that tech.
00:03:23.365 --> 00:03:25.325 Implementing the feature may require some days
00:03:25.325 --> 00:03:26.405 for the engineers to do,
00:03:26.425 --> 00:03:28.645 but how often is that feature going to be used?
00:03:28.785 --> 00:03:30.565 How exactly is that feature going to be used?
00:03:30.575 --> 00:03:31.685 These questions are critical.
00:03:31.745 --> 00:03:34.405 For example, if 10,000 users come to your website
00:03:34.505 --> 00:03:36.925 and 1000 of them, there's a 10% probability
00:03:36.925 --> 00:03:38.685 that a person will reach the checkout page
00:03:38.685 --> 00:03:40.445 and want to see themselves wearing that T-shirt
00:03:40.625 --> 00:03:42.485 and actually be comfortable to turn on their camera.
00:03:42.715 --> 00:03:45.845 Then what you want to do is you want to make 1000 API calls
00:03:46.065 --> 00:03:48.045 to maybe an external service, which is going
00:03:48.045 --> 00:03:49.925 to render the image in real time for you.
00:03:50.025 --> 00:03:53.725 The cost of each API call into 1000 into 30.
00:03:53.825 --> 00:03:56.125 So the number of days in a month is your average monthly
00:03:56.235 --> 00:03:58.685 cost for running this feature, for executing this feature.
00:03:58.745 --> 00:04:00.765 Now, what happens if you want to make it a real time thing
00:04:00.765 --> 00:04:02.405 so it's no longer a photo of a person,
00:04:02.545 --> 00:04:04.405 but it's a moving video here,
00:04:04.405 --> 00:04:05.765 you can make many business decisions.
00:04:05.765 --> 00:04:07.405 You can say that maybe we'll record you
00:04:07.405 --> 00:04:09.605 for the first five seconds and then we stop recording you.
00:04:09.605 --> 00:04:10.965 You don't have to see yourself in real time.
00:04:10.985 --> 00:04:12.605 You just move around or five seconds.
00:04:12.905 --> 00:04:15.005 We take that footage, we send it to an API,
00:04:15.025 --> 00:04:16.925 it renders the T-shirt on your body
00:04:16.985 --> 00:04:18.325 and then gives it back here.
00:04:18.435 --> 00:04:20.645 Depending on the product requirements, depending on
00:04:20.705 --> 00:04:22.725 how the feature is going to be implemented
00:04:22.725 --> 00:04:25.565 and used, you can make estimates on the cost
00:04:25.665 --> 00:04:27.245 of implementing and maintaining a feature.
00:04:27.385 --> 00:04:30.325 The second question of how much storage is it going to cost
00:04:30.745 --> 00:04:33.645 for actually having these files around is quite easy.
00:04:33.785 --> 00:04:36.165 You have again, let's say a thousand requests being
00:04:36.195 --> 00:04:37.205 sent to your server.
00:04:37.355 --> 00:04:39.485 Your server is going to store this in S3.
00:04:39.765 --> 00:04:41.485 S3 has a cost per file.
00:04:41.645 --> 00:04:43.605 I mean, if you are having a file of a particular size,
00:04:43.665 --> 00:04:45.605 you can do that, and so the total storage is going
00:04:45.605 --> 00:04:47.445 to be the average size of this video file.
00:04:47.445 --> 00:04:51.125 Let's say that's one md, one MD into a thousand is one gb,
00:04:51.265 --> 00:04:52.445 one GB per day storage.
00:04:52.545 --> 00:04:54.645 In the cloud, of course you can do optimizations,
00:04:54.825 --> 00:04:57.045 you can do optimizations both on S3 side.
00:04:57.065 --> 00:04:58.445 You can club these files together
00:04:58.545 --> 00:05:00.165 and you can do optimization on your side.
00:05:00.165 --> 00:05:02.445 You can compress the files, but we are not focusing on that.
00:05:02.465 --> 00:05:04.005 We are looking at this would be the cost.
00:05:04.005 --> 00:05:06.765 If you implemented in the simplest way meeting all
00:05:06.765 --> 00:05:08.525 requirements, is it acceptable to you?
00:05:08.525 --> 00:05:10.645 And if the cost is not acceptable, then we try
00:05:10.645 --> 00:05:12.405 to bring down the cost, then we try to optimize.
00:05:12.505 --> 00:05:14.685 So as an engineer, again, the first thing you try
00:05:14.685 --> 00:05:15.805 to do is meet all requirements.
00:05:15.805 --> 00:05:18.085 That's number one. Second one is make
00:05:18.085 --> 00:05:19.125 sure it's simple to understand.
00:05:19.125 --> 00:05:20.925 That's already done. And the third one final
00:05:21.025 --> 00:05:22.125 is optimization of cost.
00:05:22.125 --> 00:05:24.445 This is called estimation, where you look at
00:05:24.465 --> 00:05:26.325 how much data is going to be stored,
00:05:26.385 --> 00:05:27.925 how much memory may be consumed,
00:05:27.985 --> 00:05:29.085 how much bandwidth do you need,
00:05:29.085 --> 00:05:30.925 how many servers do you need to have in your fleet.
00:05:30.925 --> 00:05:32.605 These are very common questions for engineers.
00:05:32.605 --> 00:05:33.805 If you're looking for more examples,
00:05:33.845 --> 00:05:34.845 I have them in the description.
00:05:34.905 --> 00:05:37.445 At a high level, all you're looking for is being able
00:05:37.445 --> 00:05:39.205 to make back of the envelope calculations
00:05:39.305 --> 00:05:41.205 to make them more specific and accurate.
00:05:41.205 --> 00:05:43.045 Talk to product managers. Read the documentation
00:05:43.045 --> 00:05:44.125 of what is the pricing like.
00:05:44.155 --> 00:05:46.925 This will help you make better engineering decisions.
00:05:47.065 --> 00:05:48.365 We all have gut instincts.
00:05:48.385 --> 00:05:50.845 We all have feelings towards this is expensive
00:05:50.845 --> 00:05:52.085 or this is feasible, but
00:05:52.325 --> 00:05:53.445 whenever you can bring in the numbers,
00:05:53.665 --> 00:05:55.365 it really helps you put forward your point
00:05:55.465 --> 00:05:57.765 and get the entire team along with you in the decision.
00:05:57.825 --> 00:05:59.525 Now we are nearly done. Our high level
00:05:59.525 --> 00:06:00.845 design is really good.
00:06:00.985 --> 00:06:03.045 We have our founder friend very pleased with us.
00:06:03.225 --> 00:06:04.725 But when we are looking at these boxes,
00:06:04.795 --> 00:06:07.005 when we are looking at these blocks internally,
00:06:07.005 --> 00:06:08.165 they of course have code.
00:06:08.225 --> 00:06:11.045 And so the one piece of advice that you would like
00:06:11.045 --> 00:06:13.725 to give your founder friend before you walk into the sunset
00:06:14.105 --> 00:06:16.965 is, how are you going to write this code is not as important
00:06:17.105 --> 00:06:19.565 as how you expose this code to external systems.
00:06:19.745 --> 00:06:22.045 How you write the code is known to you internally.
00:06:22.225 --> 00:06:24.085 How you expose the code is
00:06:24.085 --> 00:06:25.525 how people interact with your system.
00:06:25.615 --> 00:06:26.805 Let's try to understand this.
00:06:26.895 --> 00:06:28.285 Let's say we are looking at PayPal
00:06:28.585 --> 00:06:31.525 and we want to allow payments from users through PayPal.
00:06:31.665 --> 00:06:34.445 If PayPal has a complex API contract,
00:06:34.465 --> 00:06:36.045 our developers will take a long time
00:06:36.145 --> 00:06:37.325 to understand that contract.
00:06:37.355 --> 00:06:38.645 They may be prone to error,
00:06:38.785 --> 00:06:40.725 so they may make mistakes while implementing it,
00:06:40.725 --> 00:06:42.005 while actually hitting those APIs.
00:06:42.025 --> 00:06:43.405 And if a new developer joins
00:06:43.405 --> 00:06:44.445 the company, it's going to take time.
00:06:44.445 --> 00:06:47.405 When it comes to coding, we are going to focus on one part
00:06:47.545 --> 00:06:49.165 of coding, which is the externally
00:06:49.165 --> 00:06:50.605 visible code pieces you have.
00:06:50.625 --> 00:06:52.125 We are talking about API contracts now
00:06:52.145 --> 00:06:54.445 and we are talking about service level agreements.
00:06:54.665 --> 00:06:56.325 As a high level tech lead
00:06:56.345 --> 00:06:58.565 or a founder, when you are interacting with other systems,
00:06:58.675 --> 00:07:00.765 this is the most important part that you need to know. 